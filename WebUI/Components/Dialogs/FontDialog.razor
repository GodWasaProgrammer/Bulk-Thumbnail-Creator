@namespace WebUI.Components

@using MudBlazor.Utilities
@inject IDialogService DialogService
<MudSelect Variant="Variant.Text" AdornmentColor="Color.Primary" Label="Select a font" @bind-Value="PickedFont">
@foreach (var fontPath in AvailableFonts)
{
    var fontFileName = Path.GetFileNameWithoutExtension(fontPath);
    <MudSelectItem Value="@fontPath" Style="@(($"font-family: '{fontFileName}';"))"><MudText Color="Color.Secondary">@fontFileName</MudText></MudSelectItem>
}
</MudSelect>
        <MudButton Color="Color.Success" OnClick="ConfirmSelection">OK</MudButton>
        <MudButton Color="Color.Error" OnClick="CloseDialog">Cancel</MudButton>
@code 
{
    /// <summary>
    /// List of the fonts available on drive
    /// </summary>
    private List<string> AvailableFonts => Directory.GetFiles("Fonts", "*.TTF*").ToList();
    [CascadingParameter] private MudDialogInstance MudDialog { get; set; }
    [Parameter]
    public string CurrentFont { get; set; }

    private string PickedFont;

    protected override void OnParametersSet()
    {
        // possible init
    }

    private void CloseDialog()
    {
        MudDialog.Cancel();
    }

    private void ConfirmSelection()
    {
        MudDialog.Close(DialogResult.Ok(PickedFont));
    }

    private Task OpenDialogAsync()
    {
        var options = new DialogOptions { CloseOnEscapeKey = true };

        return DialogService.ShowAsync<ColorDialog>("Font Picker", options);
    }
}
